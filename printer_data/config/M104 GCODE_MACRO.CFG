# 1. 기존의 M104(노즐 온도) 명령에 방어막 설치
[gcode_macro M104]
rename_existing: M104.1
gcode:
    {% if printer.idle_timeout.state == "Printing" and params.S|default(0)|int == 0 %}
        { action_respond_info("영도오빠! 출력 중에 노즐 끄면 안 돼요! 명령 무시합니다.") }
    {% else %}
        M104.1 {rawparams}
    {% endif %}

# 2. 기존의 M140(베드 온도) 명령에 방어막 설치
[gcode_macro M140]
rename_existing: M140.1
gcode:
    {% if printer.idle_timeout.state == "Printing" and params.S|default(0)|int == 0 %}
        { action_respond_info("영도오빠! 출력 중에 베드 끄면 안 돼요! 명령 무시합니다.") }
    {% else %}
        M140.1 {rawparams}
    {% endif %}